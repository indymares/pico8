pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
--main

function _init()
		pl={
				x=20,
				y=40,
				dx=0,
				dy=0,
				w=1,
				}
		cam_x=0
		map_start=0
		map_end=1024
		gravity=0.4
		boost=2
end

function _update()
		player_update()
		--simple camera
		cam_x=pl.x-64+pl.w/2
				if cam_x<map_start then 
						cam_x=map_start
				end
	 		if cam_x>map_end-128 then
		 			cam_x=map_end-128
	 		end
				camera(cam_x,0)
end

function _draw()
		cls()
		map(0,0)
		spr(1,pl.x,pl.y)
end
-->8
--player

function player_update()
		pl.dy+=gravity
		pl.dx+=1
		
		if btn(❎) or btn(⬆️) then 
				pl.dy-=1
		end
		
		if pl.dy>0 then
				if collide_map(pl,"down",0) then
						pl.dy=0
				else
						pl.y+=pl.dy
				end
		end
end


-->8
--collisions

function collide_map(obj,aim,flag)
		--obj = table needs x,y,w,h
		--aim = left,right,up, dowm
		
		local x=obj.x local y=obj.y
		local w=obj.w	local h=obj.h
		
		local x2=0		local y2=0
		local x1=0		local y1=0
		
		if aim=="left" then
				x1=x-1		y1=y
				x2=x					y2=y+h-1
				
		elseif aim=="right" then
				x1=x+w				y1=y
				x2=x+w+1		y2=y+h-1
		
		elseif aim=="up" then
				x1=x+1				y1=y-1
				x2=x+w-1		y2=y
		
		elseif aim=="dowm" then
				x1=x      y1=y+h
				x2=x+w				y2=y+h
		end
		
		--pixels to tiles
		x1/=8		y1/=8
		x2/=8		y2/=8
		
		--checks each corner for flag
		if fget(mget(x1,y1), flag)
		or fget(mget(x2,y1), flag)
		or fget(mget(x2,y2), flag)
		or fget(mget(x1,y2), flag) then
				return true
		else
				return flase
		end	
end
__gfx__
00000000333333330000000000000000666666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003cccccc30000000000055000655555560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007003c3cc3c30000000000055000655555560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770003c3cc3c30000000000555500655555560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770003cccccc30000000000555500655555560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007003cc33cc30000000005555550655555560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003cccccc30000000005555550655555560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333330000000005555550666666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000201000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000404040400000000000000000000000004040404000000000000000000000000040404040000000000000000000000000404040400000000000000000000000004040000000000000000000000000404040400000000000000000000000004040404040000000000000000000000000404040404
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000404040400000000000000000000000004040404000000000000000000000000040404040000000000000000000000000404040400000000000000000000000004040404000000000000000000000404040400000000000000000000000004040404000000000000000000000000000404040400000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040400000000000000000000000004040404000000000000000000000000040404040000000000000000000000000404040400000000000000000000000004040404000000000000000000000404040400000000000000000000000004040404000000000000000000000000000404040400000000000000000000000000
0404040400000000000000000000000004040404000000000000000000000000040404040000000000000000000000000404040400000000000000000000000004040404000000000000000000000404040400000000000000000000000004040404000000000000000000000000000404040400000000000000000000000000
0404040403030303030303030303030304040404030303030303030303030303040404040303030303030303030303030404040403030303030303030303030304040404030303030303030303030404040403030303030303030303030304040404030303030303030303030303030404040403030303030303030303030303
